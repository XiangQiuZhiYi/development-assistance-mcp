---
applyTo: '**'
---

# 🚨 重要：每次对话必须执行的检查清单

## ⚠️ 第一步：立即读取开发指南（强制要求）

**在生成任何代码或提供建议之前，必须按以下顺序读取文件：**

### 1️⃣ 必读：`.vscode/PERSONAL_DEV_NOTES.md` 

```
⭐ 最高优先级 - 此文件内容优先于任何其他规范
📌 包含开发者的个人代码习惯和强制规范
🔒 所有代码生成必须严格遵循此文件中的要求
```

**关键内容：**
- 核心开发规范（如：完全 TSX 模式，禁用 .vue 文件）
- 个人代码片段和最佳实践
- 特定技术栈的使用方式

### 2️⃣ 必读：`.vscode/PROJECT_GUIDE.md`

```
📋 项目级规范
🏗️ 包含项目结构、技术栈、命名规范
📚 提供实际用例和代码示例
```

**关键内容：**
- 路由系统规范
- 状态管理方案
- 实际开发用例

### 3️⃣ 如果文件不存在

使用 `mcp_my-mcp-server_read_personal_notes` 和 `mcp_my-mcp-server_read_project_guide` 读取内容

---

## ⛔ 禁止行为

❌ **禁止在未读取开发指南的情况下生成代码**  
❌ **禁止忽略 PERSONAL_DEV_NOTES.md 中的核心规范**  
❌ **禁止创造与项目风格不一致的新模式**  
❌ **禁止使用已被明确禁用的技术或写法**

--

## 💡 开发指南应用原则

**在解决问题或生成代码时：**

1. **优先参考 PERSONAL_DEV_NOTES.md**
   - 如果开发者有记录特定的写法习惯，必须遵循
   - 例如：弹框组件使用 TSX + handleOpen 模式而非 v-model
   - 开发者记录的任何特殊技巧或模式都必须优先应用

2. **其次参考 PROJECT_GUIDE.md**
   - 遵循项目的命名规范、文件组织结构
   - 使用项目中已有的组件和工具函数
   - 遵循双语规范、样式规范等
   - 生成代码时优先查看实际用例里是否有类似场景，复用其中的模式，如果没有再去其他模块寻找

3. **遇到指南中提到的场景**
   - 直接应用指南中的代码模式
   - 保持与现有代码风格一致
   - 不要擅自创造新的模式

## 🛠️ MCP 工具使用指南

项目集成了 MCP (Model Context Protocol) 服务器，提供以下功能：

### 查询类工具
- `mcp_my-mcp-server_read_project_guide` - 读取项目指南
- `mcp_my-mcp-server_read_personal_notes` - 读取个人笔记
- `mcp_my-mcp-server_search_personal_snippets` - 搜索代码片段
- `mcp_my-mcp-server_list_personal_snippets` - 列出所有片段
- `mcp_my-mcp-server_detect_project_patterns` - 检测项目模式
- `mcp_my-mcp-server_get_contextual_help` - 获取上下文帮助

### 新增类工具
- `mcp_my-mcp-server_add_use_case` - 添加实际用例到项目指南
- `mcp_my-mcp-server_add_personal_snippet` - 添加个人代码片段

### 分析类工具
- `mcp_my-mcp-server_analyze_and_generate_guide` - 分析并生成项目指南
- `mcp_my-mcp-server_update_guide_section` - 更新指南章节

### 何时调用 MCP 工具

**用户明确要求时：**
- "添加最佳实践" → 使用 `add_use_case`
- "记录开发技巧" / "这是个人开发技巧" → 使用 `add_personal_snippet`
- "生成项目指南" → 使用 `analyze_and_generate_guide`
- "搜索相关代码" → 使用 `search_personal_snippets`

**自动调用场景：**
- 解决方案特别优秀时，询问是否记录为最佳实践
- 发现用户反复使用某种模式，建议添加到个人笔记

## 📝 代码片段分类

使用 `add_personal_snippet` 时，根据内容选择正确的分类：

- `component` - 组件代码（如弹框、表格等）
- `function` - 工具函数（如数据处理、格式化等）
- `hook` - Vue Hooks 或复用逻辑
- `style` - 样式相关技巧
- `tip` - 开发技巧和注意事项
- `solution` - 问题解决方案

## ✅ 工作流程（强制执行）

```
❗ 第一步：读取 PERSONAL_DEV_NOTES.md 和 PROJECT_GUIDE.md
   ↓
2. 接收用户需求
   ↓
3. 如果指南中有相关内容
   → 严格遵循指南中的模式和规范（不得偏离）
   ↓
4. 如果指南中没有
   → 参考项目现有代码风格
   → 遵循 .github/copilot-instructions.md
   ↓
5. 生成代码或解决方案
   ↓
6. 如果是通用的最佳实践
   → 询问是否记录到开发指南
```

## 🎯 成功标准

- 代码符合项目规范和开发者习惯
- 充分利用现有组件和工具函数
- 保持代码风格一致性
- 适时记录最佳实践，持续完善开发指南
- 双语支持完整
- 类型定义准确

## ⚠️ 重要提醒（必须严格遵守）

1. 🚫 **永远不要**忽略 PERSONAL_DEV_NOTES.md 中的个人习惯
2. 🚫 **永远不要**创造与项目风格不符的新模式
3. ✅ **永远记得**在生成代码前先读取开发指南
4. ✅ **永远记得**检查是否存在相关的代码片段可以复用
5. ✅ **及时记录**优秀的解决方案到开发指南中

---

## 🎯 成功标准检查清单

在完成任务前，确认以下所有项：

- [ ] 已读取并理解 PERSONAL_DEV_NOTES.md 的核心规范
- [ ] 已读取并参考 PROJECT_GUIDE.md 的项目规范
- [ ] 代码符合项目规范和开发者习惯
- [ ] 充分利用现有组件和工具函数
- [ ] 保持代码风格一致性
- [ ] 双语支持完整
- [ ] 类型定义准确